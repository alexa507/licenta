<p-progressSpinner *ngIf="!incarcat" [style]="{width: '20%', 'margin-left':'40%', 'margin-top':'15em' }" strokeWidth="5"
  animationDuration="4s"></p-progressSpinner>
  <p-toast></p-toast>
<div id="body" *ngIf="incarcat">
    <p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle" rejectButtonStyleClass="p-button-text">
	</p-confirmDialog>
    <p-card >
        <div id="titlu">
            <h2>Administrare Useri</h2>
        </div>
        <p-table [value]="listaUseri" [rows]="5" [showCurrentPageReport]="true" styleClass="p-datatable-customers"
        [paginator]="true" [globalFilterFields]="['nume','prenume', 'username', 'email']">
            <ng-template pTemplate="header">
                <tr>
                    <th pSortableColumn="nume">Nume <p-sortIcon field="nume"></p-sortIcon>
                    </th>
                    <th pSortableColumn="oras">Prenume <p-sortIcon field="prenume"></p-sortIcon>
                    </th>
                    <th pSortableColumn="oras">Username <p-sortIcon field="username"></p-sortIcon>
                    </th>
                    <th pSortableColumn="oras">Email <p-sortIcon field="email"></p-sortIcon>
                    </th>
                    <th>Roluri</th>
                    <th>Sterge</th>
                    <th>Editeaza</th>
                </tr>
                <tr>
                    <th>
                      <p-columnFilter type="text" field="nume"></p-columnFilter>
                    </th>
                    <th>
                      <p-columnFilter type="text" field="prenume"></p-columnFilter>
                    </th>
                    <th>
                      <p-columnFilter type="text" field="username"></p-columnFilter>
                    </th>
                    <th>
                      <p-columnFilter type="text" field="email"></p-columnFilter>
                    </th>
                    <th></th>
                    <th></th>
                    <th></th>
                  </tr>
            </ng-template>
            <ng-template pTemplate="body" let-user>
                <tr>
                    <td>{{user.nume}}</td>
                    <td>{{user.prenume}}</td>
                    <td>{{user.username}}</td>
                    <td>{{user.email}}</td>
                    <td>{{user.roluri}}</td>
                    <td><button id="deleteButton" pButton type="button" (click)="deleteUser(user)"
                            label="Sterge"></button></td>
                    <td><button id="editButton" pButton type="button" (click)="editeazaUser(user)"
                            label="Editeaza"></button></td>
                </tr>
            </ng-template>
        </p-table>
    </p-card>

    <p-dialog header="Editeaza user" [(visible)]="showDialogEditare" [style]="{'width':'60%'}">
        <div class="grid" id="editareForm">
            <div class="col-3">
              <label>Nume:</label>
            </div>
            <div class="col-9">
              <input pInputText style="width: 70%" type="text" placeholder="Nume" [(ngModel)]="nume">
            </div>
      
            <div class="col-3">
              <label>Prenume:</label>
            </div>
            <div class="col-9">
              <input pInputText style="width: 70%" type="text" placeholder="Prenume" [(ngModel)]="prenume">
            </div>
      
            <div class="col-3">
              <label>Username:</label>
            </div>
            <div class="col-9">
              <input pInputText style="width: 70%" type="number" placeholder="Username" [(ngModel)]="username">
            </div>
      
            <div class="col-3">
              <label>Email:</label>
            </div>
            <div class="col-9">
              <input pInputText style="width: 70%" type="text" placeholder="Email" [(ngModel)]="email">
            </div>
      
            <div class="col-3">
              <label>Roluri:</label>
            </div>
            <div class="col-9">
                <p-multiSelect [style]="{'width':'70%'}" [options]="optiuniRoluri" [(ngModel)]="selectedRoluri" optionLabel="name"></p-multiSelect>
            </div>
      
            <div class="col-12" id="editeazaButon">
              <button pButton type="button" label="Editeaza User" (click)="salveaza()"></button>
            </div>
          </div>
    </p-dialog>
</div>